---
const {
  invoices = [],
  customers = [],
  totalRevenue = 0,
  outstanding = 0
} = Astro.props;
const formatter = new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' });
const paidInvoices = invoices.filter((invoice) => invoice.status === 'paid');
const summaryCards = [
  {
    label: 'Ingresos totales',
    value: formatter.format(totalRevenue),
    helper: 'Incluye todas las facturas registradas'
  },
  {
    label: 'Facturas pagadas',
    value: paidInvoices.length,
    helper: 'Pagos confirmados'
  },
  {
    label: 'Pendientes',
    value: outstanding,
    helper: 'Estado distinto de paid'
  },
  {
    label: 'Clientes activos',
    value: customers.length,
    helper: 'Clientes en la base de datos'
  }
];
---
<section class="card">
  <div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
    <div>
      <p class="text-sm uppercase tracking-wide text-slate-500">Resumen</p>
      <h2 class="text-2xl font-semibold text-slate-900">Estado general de facturacion</h2>
    </div>
    <span class="rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600">
      {invoices.length} facturas
    </span>
  </div>
  <div class="mt-6 grid gap-4 md:grid-cols-2 xl:grid-cols-4">
    {summaryCards.map((card) => (
      <article class="rounded-xl border border-slate-100 bg-slate-50 px-4 py-5 shadow-sm" key={card.label}>
        <p class="text-xs uppercase tracking-wide text-slate-500">{card.label}</p>
        <p class="text-2xl font-semibold text-slate-900">{card.value}</p>
        <p class="text-xs text-slate-500">{card.helper}</p>
      </article>
    ))}
  </div>
</section>
