---
import BaseLayout from '../layouts/BaseLayout.astro';
import InvoiceSummary from '../components/InvoiceSummary.astro';
import QuickActions from '../components/QuickActions.astro';
import RevenueChart from '../components/RevenueChart.astro';
import { getDashboardData } from '../lib/api';
import { API_BASE } from '../lib/config';

const dashboard = await getDashboardData();
const apiBase = API_BASE;
---
<BaseLayout title="Panel de facturacion">
  <div class="space-y-8">
    <section class="space-y-8">
      <InvoiceSummary
        invoices={dashboard.invoices}
        customers={dashboard.customers}
        totalRevenue={dashboard.totalRevenue}
        outstanding={dashboard.outstanding}
      />
      <div class="grid gap-6 lg:grid-cols-2">
        <QuickActions apiBase={apiBase} customers={dashboard.customers} />
        <RevenueChart invoices={dashboard.invoices} />
      </div>
    </section>
  </div>
</BaseLayout>
